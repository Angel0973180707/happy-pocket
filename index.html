<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>幸福教養｜零用錢練功房 v0.1.1</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0f3d2e" />
  <meta name="background-color" content="#0f3d2e" />
  <meta name="description" content="用遊戲練前額葉，用制度養金錢感。不是記帳，是自我管理訓練。" />
  <link rel="manifest" href="./manifest.json?v=0111" />
  <link rel="icon" href="./icon-192.png" />
  <link rel="apple-touch-icon" href="./icon-192.png" />

  <!-- ✅ cache-bust：確保 GitHub Pages 不黏舊 CSS -->
  <link rel="stylesheet" href="./styles.css?v=0111" />
</head>

<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="dot" aria-hidden="true"></div>
        <div class="brandText">
          <h1>幸福教養｜<span class="nowrap">零用錢練功房</span></h1>
          <p class="sub">v0.1.1 陪跑版｜用遊戲練前額葉，用制度養金錢感</p>
        </div>
      </div>

      <div class="bar">
        <div class="chip">今天：<b id="todayText">尚未開始</b></div>
        <div class="chip">連續：<b id="streakText">0</b> 天</div>
        <div class="chip">功德幣：<b id="coinText">0</b></div>
        <button class="chipBtn" id="btnOpenSettings" type="button">家長設定</button>
      </div>

      <div class="softTip" id="startHint">還沒開始也沒關係，點一張卡就會開始記錄。</div>
    </header>

    <main class="main">
      <!-- 本月狀態 -->
      <section class="card">
        <div class="cardHead">
          <h2>本月練功狀態</h2>
          <div class="pill" id="monthPill">本月尚未開始</div>
        </div>

        <div class="grid3">
          <div class="stat">
            <div class="k">本月零用錢</div>
            <div class="v"><span id="budgetText">100</span> 元</div>
          </div>
          <div class="stat">
            <div class="k">本月練功次數</div>
            <div class="v"><span id="sessionsText">0</span> 次</div>
          </div>
          <div class="stat">
            <div class="k">寶箱狀態</div>
            <div class="v"><span id="chestText">尚未解鎖</span></div>
          </div>
        </div>

        <p class="hint">不是記帳，不記每一筆花費；只練「停一下 → 算一下 → 做選擇」。</p>
      </section>

      <!-- 三張卡 -->
      <section class="card">
        <div class="cardHead">
          <h2>三張練功卡</h2>
          <div class="pill subtle">完成一次 +1 功德幣</div>
        </div>

        <div class="gridCards">
          <button class="aCard" data-action="brake" type="button">
            <div class="t">剎車卡</div>
            <div class="d">10 秒停一下，讓大腦換檔</div>
          </button>

          <button class="aCard" data-action="time" type="button">
            <div class="t">時間卡</div>
            <div class="d">把金額換算成幾天零用錢</div>
          </button>

          <button class="aCard" data-action="nowant" type="button">
            <div class="t">無欲卡</div>
            <div class="d">先不買，把選擇留住</div>
          </button>
        </div>

        <div class="row">
          <button class="btn" id="btnOpenChest" type="button">月底開寶箱</button>
          <button class="btn ghost" id="btnHistory" type="button">練功紀錄</button>
        </div>

        <div class="mini" id="miniTip">提示：先「停一下」，再做選擇。</div>
      </section>

      <!-- 回饋（完成一輪解鎖） -->
      <section class="card">
        <div class="cardHead">
          <h2>陪跑回饋（自願）</h2>
          <div class="pill subtle">不影響使用</div>
        </div>

        <p class="p">
          這份回饋會在你完成「一輪」後才解鎖。<br />
          不是交作業，是等你真的用過、感受到，再說幾句真話。
        </p>

        <div class="row">
          <a
            id="btnFeedback"
            class="btn ghost disabled"
            href="#"
            aria-disabled="true"
            data-feedback-url="https://forms.gle/srBRWJn1BTQCWd5Z7"
          >留下陪跑回饋（完成一輪後解鎖）</a>
        </div>

        <div class="mini muted">
          ✅ 不填信箱也可以送出（表單內可選填）<br />
          ✅ 不填也不影響工具使用
        </div>
      </section>

      <!-- 安裝說明 -->
      <section class="card">
        <div class="cardHead">
          <h2>安裝到主畫面（像 App 一樣用）</h2>
          <div class="pill subtle">加入主畫面</div>
        </div>

        <div class="grid3">
          <div class="stat">
            <div class="k">Android（Chrome）</div>
            <div class="mini">右上角︙ → 加入主畫面</div>
          </div>
          <div class="stat">
            <div class="k">iPhone（Safari）</div>
            <div class="mini">分享 → 加入主畫面</div>
          </div>
          <div class="stat">
            <div class="k">安心提醒</div>
            <div class="mini">資料只在手機，不蒐集不上傳</div>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="mini muted">© 幸福教養｜零用錢練功房 · happy-pocket</div>
      </footer>
    </main>
  </div>

  <script src="./app.js?v=0111"></script>

  <!-- ✅ SW：版本化註冊，降低黏舊 -->
  <script>
    (function () {
      if (!("serviceWorker" in navigator)) return;
      window.addEventListener("load", function () {
        navigator.serviceWorker.register("./sw.js?v=0111").catch(function(){});
      });
    })();
  </script>
</body>
  </html>
